Este código refatorado:

Divide o código em módulos (produto, carrinho, utils) para melhorar a organização.
Simplifica as funções, reduzindo a complexidade.
Introduz funções auxiliares para leitura de entrada, centralizando a lógica de validação.
Melhora a segurança, usando fgets para entrada de strings e centralizando verificações.
Cada módulo encapsula funções e dados relacionados, facilitando testes e manutenção.
